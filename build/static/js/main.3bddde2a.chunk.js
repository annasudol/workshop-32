(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{277:function(e,t,n){e.exports=n(462)},440:function(e,t,n){},462:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(47),l=n.n(c),i=n(48),o=n(40),u=n(238),s=n(262),m=n(153),d=n(239),E=n.n(d),f=n(50),p={isAuth:!1,authModal:!1,nick:null,error:null,inProgress:!1};function v(e){return{type:"LOGIN_SUCCESS",payload:{nick:e}}}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(f.a)({},e,{isAuth:!0,nick:t.payload.nick,authModal:!1,error:null,inProgress:!1});case"LOGOUT_USER":return Object(f.a)({},p);case"LOGIN_USER":return Object(f.a)({},e,{inProgress:!0});case"OPEN_AUTH_MODAL":return Object(f.a)({},e,{authModal:!0});case"CLOSE_AUTH_MODAL":return Object(f.a)({},e,{authModal:!1,error:null,inProgress:!1});case"LOGIN_ERROR":return Object(f.a)({},e,{inProgress:!1,error:t.payload.error});default:return e}},g={error:null,isComplete:!1,inProgress:!1};var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return(arguments.length>1?arguments[1]:void 0).type,e},O=(n(286),[{text:"Single",value:"SINGLE"},{text:"Double",value:"DOUBLE"},{text:"Family",value:"FAMILY"}]),w={error:null,order:[],entities:{},inProgress:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;return(arguments.length>1?arguments[1]:void 0).type,e};var y=Object(o.combineReducers)({root:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(arguments.length>1?arguments[1]:void 0).type,e},auth:h,booking:b,ratings:j}),k=n(19),x=n.n(k),C=n(24);function S(e){return e.auth.isAuth}function L(e){return e.auth.authModal}function M(e){return e.auth.nick}function R(e){return e.auth.error}function I(e){return e.auth.inProgress}var A=n(90),_=function(e){return new Promise(function(t){return setTimeout(function(){return t(!0)},e)})};function U(e){return z.apply(this,arguments)}function z(){return(z=Object(A.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(1500);case 2:return e.abrupt("return",new Promise(function(e,n){"admin"===t&&e(!0),n("Prawid\u0142owe has\u0142o to `admin`")}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=x.a.mark(P),N=x.a.mark(T),D=x.a.mark(F),G=x.a.mark(W);function P(e){var t,n,a;return x.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload,n=t.nick,a=t.password,r.next=4,Object(C.a)(U,a);case 4:return r.next=6,Object(C.d)(v(n));case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(C.d)({type:"LOGIN_ERROR",payload:{error:r.t0}});case 12:case"end":return r.stop()}},H,null,[[0,8]])}function T(e){var t;return x.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(C.c)(P,e);case 2:return t=n.sent,n.next=5,Object(C.f)(["LOGIN_SUCCESS","LOGIN_ERROR","CLOSE_AUTH_MODAL"]);case 5:if("CLOSE_AUTH_MODAL"!==n.sent.type){n.next=9;break}return n.next=9,Object(C.b)(t);case 9:case"end":return n.stop()}},N)}function F(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.e)(S);case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,Object(C.d)({type:"OPEN_AUTH_MODAL"});case 7:return e.next=9,Object(C.f)(["LOGIN_SUCCESS","CLOSE_AUTH_MODAL"]);case 9:if("LOGIN_SUCCESS"!==e.sent.type){e.next=14;break}return e.abrupt("return",!0);case 14:return e.abrupt("return");case 15:case"end":return e.stop()}},D)}function W(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.g)("MANUAL_LOGIN",F);case 2:return e.next=4,Object(C.g)("LOGIN_USER",T);case 4:case"end":return e.stop()}},G)}var B=W,V=x.a.mark(Z);function Z(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},V)}var K=x.a.mark(Y),J=x.a.mark($),X=x.a.mark(q);function Y(e){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)({type:"SAGA_INIT",text:"Welcome in BOOKit app from SAGA"});case 2:case"end":return e.stop()}},K)}function $(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.g)("REDUX_INIT",Y);case 2:case"end":return e.stop()}},J)}function q(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)($);case 2:return e.next=4,Object(C.c)(B);case 4:return e.next=6,Object(C.c)(Z);case 6:case"end":return e.stop()}},X)}var Q=n(78),ee=n(71),te=n(72),ne=n(75),ae=n(73),re=n(76),ce=n(470),le=n(487),ie=n(484),oe=n(471),ue=n(482),se=n(486),me=function(e){function t(){var e,n;Object(ee.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(ne.a)(this,(e=Object(ae.a)(t)).call.apply(e,[this].concat(r)))).state={},n.hideFixedMenu=function(){return n.setState({fixed:!1})},n.showFixedMenu=function(){return n.setState({fixed:!0})},n}return Object(re.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,n=e.login,a=e.nick,c=e.logout,l=this.state.fixed;return r.a.createElement(ce.a,{once:!1,onBottomPassed:this.showFixedMenu,onBottomPassedReverse:this.hideFixedMenu},r.a.createElement(le.a,{inverted:!0,textAlign:"center",style:{minHeight:200,padding:"0.5em 0em"},vertical:!0},r.a.createElement(ie.a,{fixed:l?"top":null,inverted:!l,pointing:!l,secondary:!l,size:"large"},r.a.createElement(oe.a,null,r.a.createElement(ie.a.Item,{to:"/",as:Q.a,active:!0},"BOOKit"),r.a.createElement(ie.a.Item,{position:"right"},t?r.a.createElement(r.a.Fragment,null,"Witaj, ",a,r.a.createElement(ue.a,{style:{marginLeft:"0.5em"},to:"rate",as:Q.a,inverted:!l},"Oce\u0144 pobyt"),r.a.createElement(ue.a,{as:"a",onClick:c,inverted:!l,primary:l,style:{marginLeft:"0.5em"}},"Wyloguj")):r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{style:{marginLeft:"0.5em"},to:"rate",as:Q.a,inverted:!l},"Oce\u0144 pobyt"),r.a.createElement(ue.a,{style:{marginLeft:"0.5em"},onClick:n,as:"a",inverted:!l},"Zaloguj"))))),r.a.createElement(Ee,null)))}}]),t}(a.Component),de=Object(i.b)(function(e,t){return{isAuthenticated:S(e),nick:M(e)}},function(e,t){return{login:function(){return e({type:"MANUAL_LOGIN"})},logout:function(){return e({type:"LOGOUT_USER"})}}})(me),Ee=function(){return r.a.createElement(oe.a,null,r.a.createElement(se.a,{as:"h1",inverted:!0,style:{fontSize:"3em",fontWeight:"normal",marginBottom:"0.5em",marginTop:"0.5em"}},"Zarezerwuj DZI\u015a i ciesz si\u0119 JUTREM.",r.a.createElement(se.a.Subheader,null,"Wyszukiwarka wolnych pokoj\xf3w tylko na dzie\u0144 do przodu w najlepszych cenach.")))},fe=n(32),pe=n(476),ve=n(480),he=n(475),ge=Object(i.b)(function(e,t){return{isOpen:L(e),error:R(e),loading:I(e)}},function(e,t){return{login:function(t,n){return e(function(e,t){return{type:"LOGIN_USER",payload:{nick:e,password:t}}}(t,n))},close:function(){return e({type:"CLOSE_AUTH_MODAL"})}}})(function(e){var t=e.isOpen,n=e.close,c=e.login,l=e.error,i=e.loading,o=Object(a.useState)(""),u=Object(fe.a)(o,2),s=u[0],m=u[1],d=Object(a.useState)(""),E=Object(fe.a)(d,2),f=E[0],p=E[1];return r.a.createElement(pe.a,{open:t,basic:!0,size:"mini"},r.a.createElement(le.a,{textAlign:"center",stacked:!0},r.a.createElement(se.a,null,"Zaloguj si\u0119"),l&&r.a.createElement(ve.a,{warning:!0},l),r.a.createElement(he.a,{onSubmit:function(){return c(s,f)},size:"large"},r.a.createElement(le.a,{stacked:!0},r.a.createElement(he.a.Input,{name:"nick",onChange:function(e,t){var n=t.value;return m(n)},fluid:!0,icon:"user",iconPosition:"left",placeholder:"nick"}),r.a.createElement(he.a.Input,{onChange:function(e,t){var n=t.value;return p(n)},fluid:!0,icon:"lock",iconPosition:"left",placeholder:"has\u0142o",type:"password"}),r.a.createElement(ue.a,{loading:i,color:"teal",fluid:!0,size:"large"},"Zaloguj"),r.a.createElement("br",null),r.a.createElement(ue.a,{onClick:n,basic:!0,fluid:!0,size:"large"},"Anuluj"))),r.a.createElement(ve.a,null,"nick: ",r.a.createElement("strong",null,"dowolny"),r.a.createElement("br",null)," has\u0142o: ",r.a.createElement("strong",null,"admin"))))}),be=n(483),Oe=n(79),we=n(478),je=function(e){return r.a.createElement(we.a,{basic:"very"},r.a.createElement(we.a.Header,null,r.a.createElement(we.a.Row,null,r.a.createElement(we.a.HeaderCell,null,"Hotel"),r.a.createElement(we.a.HeaderCell,{singleLine:!0},"\u015arednia ocena"),r.a.createElement(we.a.HeaderCell,{singleLine:!0},"Twoja ocena"))),r.a.createElement(we.a.Body,null,e.children))},ye=n(261),ke=n(489);n(439);n(440);var xe=function(e){var t=e.hotel,n=e.rate;return r.a.createElement(we.a.Row,null,r.a.createElement(we.a.Cell,null,r.a.createElement(se.a,{as:"h4",image:!0},r.a.createElement(ye.a,{src:"https://picsum.photos/175?random=".concat(t.id),rounded:!0,size:"mini"}),r.a.createElement(se.a.Content,null,t.title,r.a.createElement(se.a.Subheader,null,r.a.createElement("p",{className:"address-width-limit"},t.location.address))))),r.a.createElement(we.a.Cell,{collapsing:!0},t.rating.average," (",t.rating.reviews,")"),r.a.createElement(we.a.Cell,{collapsing:!0},r.a.createElement(ke.a,{disabled:!!t.rating.user,maxRating:10,onRate:function(e,a){var r=a.rating;return n(t.id,r)},defaultRating:0,icon:"star",size:"small"})))},Ce=function(e){var t=e.fetchHotels,n=e.data,a=void 0===n?[]:n,c=e.isLoading,l=void 0!==c&&c,i=e.count,o=void 0===i?0:i,u=e.average,s=void 0===u?0:u;return r.a.createElement(oe.a,{text:!0},r.a.createElement(le.a,{vertical:!0,style:{padding:"2em 0em"}},r.a.createElement(be.a.Group,null,r.a.createElement(be.a,{horizontal:!0},r.a.createElement(be.a.Value,null,r.a.createElement(Oe.a,{name:"building outline"})," ",o),r.a.createElement(be.a.Label,null,"ocenionych hoteli")),r.a.createElement(be.a,{horizontal:!0},r.a.createElement(be.a.Value,null,r.a.createElement(Oe.a,{name:"star outline"})," ",s),r.a.createElement(be.a.Label,null,"twoja \u015brednia ocen"))),r.a.createElement(je,null,a.map(function(e){return r.a.createElement(xe,{key:e.id,hotel:e})})),r.a.createElement(ue.a,{loading:l,onClick:t,fluid:!0},"Za\u0142aduj wi\u0119cej")))},Se=n(116),Le=n(259),Me=n.n(Le),Re=n(474),Ie=n(485),Ae=n(473),_e=n(472),Ue=function(e){var t=e.count,n=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{as:"h4"},"Filtruj wed\u0142ug nast\u0119puj\u0105cych kryteri\xf3w:"),r.a.createElement(Ae.a,null),r.a.createElement(se.a,{as:"h5"},"Rodzaj \u0142\xf3\u017cka"),O.map(function(e){return r.a.createElement("div",{key:e.value},r.a.createElement(_e.a,{onChange:function(e,t){var a=t.value,r=t.checked;return n(a,r)},value:e.value,label:e.text})," ","(",t[e.value],")")}))},ze=r.a.memo(function(e){var t=e.setField,n=e.sortField;return r.a.createElement(ie.a,{secondary:!0},r.a.createElement(ie.a.Menu,{position:"right"},r.a.createElement(ie.a.Item,null,"Sortuj wed\u0142ug:"),He.map(function(e){return r.a.createElement(ie.a.Item,{key:e.value,onClick:function(){return t(e.value)},as:"a"},e.value===n&&r.a.createElement(Oe.a,{name:"filter"}),e.text)})))}),He=[{text:"ilo\u015b\u0107 opinii",value:"reviews"},{text:"ocena go\u015bci",value:"rating"},{text:"cena",value:"price"}],Ne=n(477),De=n(121),Ge=n(263);r.a.Component;var Pe={LOW:"niskie ob\u0142o\u017cenie",MEDIUM:"\u015brednie ob\u0142o\u017cenie",HIGH:"wysokie ob\u0142o\u017cenie"},Te=function(e){return function(t){function n(e){var t;return Object(ee.a)(this,n),(t=Object(ne.a)(this,Object(ae.a)(n).call(this,e))).state={hovering:!1},t.handleMouseOver=function(){return t.setState({hovering:!0})},t.handleMouseOut=function(){return t.setState({hovering:!1})},t.myRef=Object(a.createRef)(),t}return Object(re.a)(n,t),Object(te.a)(n,[{key:"componentDidMount",value:function(){var e=this.myRef.current;e&&(e.addEventListener("mouseover",this.handleMouseOver),e.addEventListener("mouseout",this.handleMouseOut))}},{key:"componentWillUnmount",value:function(){var e=this.myRef.current;e.removeEventListener("mouseover",this.handleMouseOver),e.removeEventListener("mouseout",this.handleMouseOut)}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{hoverRef:this.myRef,isHovered:this.state.hovering}))}}]),n}(r.a.Component)}(function(e){var t=e.hoverRef,n=e.isHovered,a=Object(Ge.a)(e,["hoverRef","isHovered"]);return r.a.createElement("span",{ref:t},r.a.createElement(Fe,Object.assign({showDetail:n},a)))}),Fe=function(e){return r.a.createElement(De.a,{icon:"building",content:e.showDetail?Pe[e.demand]:e.demand})},We=Te,Be=(n(459),function(e){var t=e.hotel,n=e.selectHotel;return r.a.createElement(Ne.a,null,r.a.createElement(Ne.a.Image,{src:"https://picsum.photos/175?random=".concat(t.id)}),r.a.createElement(Ne.a.Content,null,r.a.createElement(Ne.a.Header,{as:"a"},t.title),r.a.createElement(Ne.a.Meta,null,t.location.address," (do centrum ",t.location.centre,")"),r.a.createElement(Ne.a.Description,{style:{minHeight:"76px"}},r.a.createElement("div",{style:{float:"right"}},r.a.createElement(De.a,{tag:!0,size:"huge"},t.price.amount," z\u0142")),"Ocena go\u015bci:"," ",r.a.createElement(ke.a,{disabled:!0,maxRating:10,defaultRating:Math.round(t.rating.average),icon:"star",size:"small"}),r.a.createElement("div",null,"Ilo\u015b\u0107 opinii: ",r.a.createElement("strong",null,t.rating.reviews)),r.a.createElement("div",null,"\u015aniadanie wliczone w cen\u0119:"," ",r.a.createElement("strong",null,t.price.breakfast?"TAK":"NIE")),r.a.createElement("div",null,"Rodzaj \u0142\xf3\u017cka: ",r.a.createElement("strong",null,t.room))),r.a.createElement(Ne.a.Extra,null,n&&r.a.createElement(ue.a,{onClick:function(){return n(t)},primary:!0,floated:"right"},"Wybierz"),r.a.createElement(We,{demand:t.demand}))))}),Ve=function(e){var t=e.hotels,n=e.selectHotel;return r.a.createElement(Ne.a.Group,{divided:!0},t.map(function(e){return r.a.createElement(Be,{key:e.id,hotel:e,selectHotel:n})}))},Ze=function(e){var t=e.isChartVisible,n=e.switchChartVisible;return r.a.createElement(_e.a,{checked:t,onChange:function(){return n(!t)},toggle:!0,label:"Poka\u017c wykres"})};var Ke=function(e){var t=r.a.lazy(e);return t.preload=e,t}(function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,649))});var Je={price:function(e,t){return e.price.amount-t.price.amount},rating:function(e,t){return t.rating.average-e.rating.average},reviews:function(e,t){return t.rating.reviews-e.rating.reviews}};var Xe=function(e){var t=e.children;return r.a.createElement(Ie.a,{stackable:!0,divided:!0},r.a.createElement(Ie.a.Row,null,t))};Xe.Sidebar=function(e){var t=e.children;return r.a.createElement(Ie.a.Column,{width:4},t)},Xe.Feed=function(e){var t=e.children;return r.a.createElement(Ie.a.Column,{width:12},t)};var Ye=function(e){var t=Object(a.useState)("price"),n=Object(fe.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)({}),o=Object(fe.a)(i,2),u=o[0],s=o[1],m=Object(a.useState)([]),d=Object(fe.a)(m,2),E=d[0],p=d[1],v=Object(a.useState)(!1),h=Object(fe.a)(v,2),g=h[0],b=h[1],w=Object(a.useState)(!1),j=Object(fe.a)(w,2),y=j[0],k=j[1];Object(a.useEffect)(function(){!function(){var e=Object(A.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ke.preload(),b(!0),e.next=4,Me()("https://warsawjs-workshop-32-book-it-m.herokuapp.com/list");case 4:t=e.sent,b(!1),p(t.data.list.slice(0,20));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]);var C=Object(a.useCallback)(function(e,t){return s(Object(f.a)({},u,Object(Se.a)({},e,t)))},[u]),S=Object(a.useMemo)(function(){return function(e){return e.reduce(function(e,t){return e[t.room]=e[t.room]?e[t.room]+1:1,e},{})}(E)},[E]),L=Object(a.useMemo)(function(){return function(e,t){return O.find(function(t){return e[t.value]})?t.filter(function(t){return e[t.room]}):t}(u,E)},[u,E]),M=Object(a.useMemo)(function(){return function(e,t){return e.sort(Je[t]).concat([])}(L,c)},[L,c]),R=Object(a.useMemo)(function(){return L.map(function(e){return{rating:+e.rating.average,price:+e.price.amount,reviews:+e.rating.reviews,name:e.title}})},[L]);return r.a.createElement(oe.a,null,r.a.createElement(ze,{sortField:c,setField:l}),r.a.createElement(Xe,null,r.a.createElement(Xe.Sidebar,null,r.a.createElement(Ze,{isChartVisible:y,switchChartVisible:k}),r.a.createElement(Ue,{count:S,onChange:C})),r.a.createElement(Xe.Feed,{isLoading:g},y&&r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(Re.a,{active:!0,inline:"centered"})},r.a.createElement(Ke,{data:R})),g?r.a.createElement(Re.a,{active:!0,inline:"centered"}):r.a.createElement(Ve,{hotels:M}))))},$e=(n(479),n(481)),qe=function(e){var t=e.step,n=void 0===t?1:t;return r.a.createElement(oe.a,null,r.a.createElement($e.a.Group,{widths:3},r.a.createElement($e.a,{disabled:1!==n,active:1===n},n>1?r.a.createElement(Oe.a,{color:"green",name:"checkmark"}):r.a.createElement(Oe.a,{name:"bed"}),r.a.createElement($e.a.Content,null,r.a.createElement($e.a.Title,null,"Lista hoteli"),r.a.createElement($e.a.Description,null,"Wybierz pok\xf3j dla siebie"))),r.a.createElement($e.a,{disabled:2!==n,active:2===n},n>2?r.a.createElement(Oe.a,{color:"green",name:"checkmark"}):r.a.createElement(Oe.a,{name:"payment"}),r.a.createElement($e.a.Content,null,r.a.createElement($e.a.Title,null,"P\u0142atno\u015b\u0107"),r.a.createElement($e.a.Description,null,"Wprowad\u017a form\u0119 p\u0142atno\u015bci"))),r.a.createElement($e.a,{disabled:3!==n,active:3===n},n>3?r.a.createElement(Oe.a,{color:"green",name:"checkmark"}):r.a.createElement(Oe.a,{name:"file alternate outline"}),r.a.createElement($e.a.Content,null,r.a.createElement($e.a.Title,null,"Potwierdzenie"),r.a.createElement($e.a.Description,null,"Potwierd\u017a rezerwacje")))))},Qe=function(e){var t=e.children;return r.a.createElement(le.a,{vertical:!0,style:{padding:"2em 0em"}},t)},et=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe,null,r.a.createElement(qe,{step:1})),r.a.createElement(Qe,null,r.a.createElement(Ye,null),!1,!1))},tt=function(){return r.a.createElement(et,null)},nt=function(){return r.a.createElement(Ce,null)},at=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,null),r.a.createElement(de,null),r.a.createElement(Q.b,null,r.a.createElement(tt,{path:"/"}),r.a.createElement(nt,{path:"rate"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rt=function(e){var t=Object(s.a)(),n=[m.apiMiddleware,E.a,t],a=[o.applyMiddleware.apply(void 0,n)],r=u.composeWithDevTools.apply(void 0,a),c=Object(o.createStore)(y,e,r);return t.run(q),c}();rt.dispatch({type:"REDUX_INIT",text:"Welcome in BOOKit app from REDUX"}),l.a.render(r.a.createElement(i.a,{store:rt},r.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[277,1,2]]]);
//# sourceMappingURL=main.3bddde2a.chunk.js.map